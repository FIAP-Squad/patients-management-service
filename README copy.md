
# 🚀 Doctors Management Service

![Node.js](https://img.shields.io/badge/Node.js-14.x-brightgreen) ![TypeScript](https://img.shields.io/badge/TypeScript-4.x-blue) ![AWS Cognito](https://img.shields.io/badge/AWS%20Cognito-Enabled-yellow) ![RabbitMQ](https://img.shields.io/badge/RabbitMQ-3.8-orange) ![AmazonMQ](https://img.shields.io/badge/AmazonMQ-Enabled-red) ![SOLID](https://img.shields.io/badge/Architecture-SOLID-brightgreen) ![TDD](https://img.shields.io/badge/Test%20Coverage-100%25-green)

## 📘 Overview

This project is a **scalable microservice** built with **Node.js** and **TypeScript**, utilizing **RabbitMQ** and **AmazonMQ** for messaging, and **AWS Cognito** for authentication. The system architecture follows **SOLID principles** and the project is developed using **Test-Driven Development (TDD)** to ensure high code quality and reliability.

### 🛠️ Key Technologies:
- **Node.js** 14.x
- **TypeScript** 4.x
- **RabbitMQ** and **AmazonMQ** for message brokering
- **AWS Cognito** for user authentication
- **SOLID** architecture
- **TDD** with unit and integration tests

---

****

## 📂 Project Details

```bash
├── .github/                # GitHub-specific configurations (e.g., actions, issue templates)
├── .husky/                 # Husky pre-commit hooks configuration
├── coverage/               # Coverage reports generated by tests
├── dist/                   # Compiled TypeScript files
├── node_modules/           # Installed Node.js dependencies (auto-generated by npm or yarn)
├── prisma/                 # Prisma ORM schema and related files
├── src/                    # Application source code
│   ├── domain/             # Domain entities and business logic
│   ├── infrastructure/     # Application infrastructure (controllers, repositories, gateways, etc.)
│   │   ├── controllers/    # Handle HTTP requests and delegate to use cases
│   │   ├── DAOs/           # Data Access Objects for database interactions
│   │   ├── errors/         # Custom error handling and error types
│   │   ├── gateways/       # Integration with external systems (APIs, message brokers)
│   │   ├── handlers/       # Event or request handlers
│   │   ├── helpers/        # Utility functions and helpers
│   │   ├── middlewares/    # Middleware functions for request processing (auth, validation)
│   │   ├── presenters/     # Formatting responses to be sent back to clients
│   │   ├── repositories/   # Repositories interacting with DAOs
│   │   ├── validations/    # Input validation logic
│   │   └── index.ts        # Entry point to aggregate and export infrastructure components
│   ├── main/               # Application entry point and core settings
│   │   ├── adapters/       # Interfaces that connect the infrastructure with use cases
│   │   ├── config/         # Application configuration (e.g., environment variables, setup)
│   │   ├── decorators/     # Function or class decorators for reusability (e.g., logging, caching)
│   │   ├── factories/      # Factory classes for creating objects (following Factory pattern)
│   │   ├── middlewares/    # Core middlewares used across the app
│   │   ├── routes/         # Route definitions (HTTP endpoints)
│   │   └── server.ts       # Main server setup and bootstrap logic
│   ├── usecases/           # Business logic and application rules
│   └── server.ts           # Server entry point
├── tests/                  # Unit and integration test cases
├── .dockerignore           # Files and folders to ignore when creating a Docker image
├── .env                    # Environment variables (e.g., secrets, database credentials)
├── .env.example            # Example environment variable file for reference
├── .eslintrc.json          # ESLint configuration file for linting JavaScript/TypeScript code
├── .gitignore              # Git configuration to ignore specific files and folders
├── .huskyrc.json           # Husky configuration file
├── .lintstagedrc.json      # Configuration for lint-staged to run linters on staged files
├── .sonar-project.properties # SonarQube configuration for code quality and static analysis
├── CHANGELOG.md            # Changelog for tracking version changes and updates
├── Dockerfile              # Docker configuration for containerizing the application
├── Dockerfile.prd          # Dockerfile specific to the production build
├── jest-unit-config.js     # Jest configuration for unit testing
├── jest.config.js          # General Jest configuration for testing
├── LICENSE                 # License information for the project
├── package-lock.json       # Auto-generated file that locks the dependency versions
├── package.json            # Node.js project metadata and dependencies
├── README.md               # Project documentation
├── start.sh                # Shell script to start the application
├── tsconfig-build.json     # TypeScript configuration specific to the build process
├── tsconfig.json           # General TypeScript configuration file


```

---

## 🌐 Prerequisites

```bash
- Node.js 14.x or higher
- Docker (for running RabbitMQ locally)
- Prisma MYSQL (for entities)
- MONGODB Drive (for logs)
- AmazonMQ setup for message brokering
```

---

## 🚀 Getting Started

### 1. Clone the repository:
```bash
git clone git@github.com:FIAP-Squad/doctors-management-service.git
cd yourproject
```

### 2. Install dependencies:
```bash
npm install
```

### 3. Set up environment variables:
Create a `.env` file with the following variables:
```bash
PORT=
RABBITMQ_PROTOCOL=
RABBITMQ_HOST_NAME=
RABBITMQ_PORT=
RABBITMQ_USERNAME=
RABBITMQ_PASSWORD=
MYSQL_URL=
MONGODB_URL=
MONGODB_DATABASE=

```

### 4. Run RabbitMQ locally with Docker two layers before (../):
```bash
docker-compose up -- build
```

---

## 🧪 Testing

This project is developed using **TDD** (Test-Driven Development). All tests are written using **Jest** and can be run with the following command:

```bash
npm run test
```

To check test coverage:
```bash
npm run test:coverage
```

---

## ⚙️ Key Features

- **SOLID Architecture**: Designed with SOLID principles for scalability and maintainability.
- **TDD**: Developed using Test-Driven Development to ensure robustness and minimal bugs.
- **AWS Cognito Integration**: Fully integrated authentication and user management with AWS Cognito.
- **RabbitMQ and AmazonMQ Messaging**: Efficient message handling using RabbitMQ for local dev and AmazonMQ for production.
- **TypeScript**: Strongly typed codebase with TypeScript for better development experience and fewer runtime errors.

---

## 📖 Architecture Principles

### SOLID Principles:
- **Single Responsibility Principle**: Each class and module has one well-defined responsibility.
- **Open/Closed Principle**: The system is open for extension but closed for modification.
- **Liskov Substitution Principle**: Derived classes can be substituted for their base class.
- **Interface Segregation Principle**: Clients should not be forced to depend on interfaces they do not use.
- **Dependency Inversion Principle**: High-level modules depend on abstractions, not on concrete implementations.

---

## 📦 Deployment

The project can be deployed using Docker. The `Dockerfile` is already configured for the application.

For production, you can integrate with AWS services like ECS, ECR, and AmazonMQ.

---

## 👨‍💻 Contributing

We welcome contributions! Please follow these steps:

1. Fork the repository
2. Create a new branch (`git checkout -b feature/my-new-feature`)
3. Commit your changes (`git commit -m 'Add some feature'`)
4. Push to the branch (`git push origin feature/my-new-feature`)
5. Create a new Pull Request to qa

---

## 🔗 Useful Links

- [Node.js Documentation](https://nodejs.org/en/docs/)
- [TypeScript Documentation](https://www.typescriptlang.org/docs/)
- [RabbitMQ Documentation](https://www.rabbitmq.com/documentation.html)
- [AWS Cognito Documentation](https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html)
- [AmazonMQ Documentation](https://docs.aws.amazon.com/amazon-mq/latest/developer-guide/welcome.html)

---

## 📝 License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
